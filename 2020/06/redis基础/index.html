<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>
Redis基础
</title>

    
  <link href="https://sltaurusblog.gitee.io/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />



  
  <meta name="author" content="SLTaurus" />
  <meta name="description" content="SLTaurus的博客" />



<meta name="generator" content="Hugo 0.57.2" />

<link rel="canonical" href="https://sltaurusblog.gitee.io/2020/06/redis%E5%9F%BA%E7%A1%80/" />


<meta property="og:title" content="Redis基础" />
<meta property="og:description" content="Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sltaurusblog.gitee.io/2020/06/redis%E5%9F%BA%E7%A1%80/" />
<meta property="article:published_time" content="2020-06-05T09:00:03+08:00" />
<meta property="article:modified_time" content="2020-06-05T09:00:03+08:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Redis基础"/>
<meta name="twitter:description" content="Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。"/>


<link rel="stylesheet" href="https://sltaurusblog.gitee.io/css/github-markdown.css" />
<link rel="stylesheet" href="https://sltaurusblog.gitee.io/css/semantic.min.css" />
<link rel="stylesheet" href="https://sltaurusblog.gitee.io/css/site.css" />


  
    <link rel="stylesheet"  href="https://sltaurusblog.gitee.io/css/prism.css">
  



<style>
  a {
    color: seagreen !important;
  }
</style>



<style>
  .inverted a {
     color: darkseagreen !important;
  }
</style>


  </head>

  
  <body style="background: black;">
  
    <div class="flip-container">
      <div class="flipper">
        <section class="front">
          
<nav class="ui secondary inverted menu dream-menu">

  <div class="item">
    <i class="large link bullseye icon dream-flip-toggle" title="翻转！"></i>
  </div>
  <div class="item">
    <i class="large link home icon" title="首页" onclick="window.location.href = 'https:\/\/sltaurusblog.gitee.io'"></i>
  </div>
  <div class="item">
    <i class="large link icon theme-switch" onclick="themeSwitch()"></i>
  </div>
</nav>

          
<div class="ui centered relaxed grid dream-grid">
  <div class="sixteen wide mobile sixteen wide tablet twelve wide computer column markdown-body dream-single">

    <section class="ui top attached segment" id="dream-save-post-as-img">
      <header style="margin-top: 0 !important;">
        <h2 class="ui header">
          Redis基础
          <div class="sub header">@ SLTaurus · Friday, Jun 5, 2020 · 19 分钟阅读 · 更新于 Jun 5, 2020</div>
        </h2>
      </header>
      <article style="margin-top: 2rem;">
		<p>Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p>

<h1 id="table-of-contents"></h1><nav id="TableOfContents">
<ul>
<li><a href="#简介">简介</a>
<ul>
<li><a href="#redis-优势">Redis 优势</a></li>
<li><a href="#redis与其他key-value存储有什么不同">Redis与其他key-value存储有什么不同？</a></li>
</ul></li>
<li><a href="#redis-安装">Redis 安装</a>
<ul>
<li><a href="#window-下安装">Window 下安装</a>
<ul>
<li><a href="#测试所安装的redis">测试所安装的Redis</a></li>
</ul></li>
<li><a href="#linux-下安装">Linux 下安装</a></li>
<li><a href="#ubuntu-下安装">Ubuntu 下安装</a></li>
<li><a href="#mac-下安装">Mac 下安装</a></li>
</ul></li>
<li><a href="#redis-配置">Redis 配置</a>
<ul>
<li><a href="#编辑配置">编辑配置</a>
<ul>
<li><a href="#参数说明">参数说明</a></li>
</ul></li>
<li><a href="#备注">备注</a></li>
</ul></li>
<li><a href="#redis-数据类型">Redis 数据类型</a>
<ul>
<li><a href="#string-字符串">String（字符串）</a></li>
<li><a href="#hash-哈希">Hash（哈希）</a></li>
<li><a href="#list-列表">List（列表）</a></li>
<li><a href="#set-集合">Set（集合）</a></li>
<li><a href="#zset-sorted-set-有序集合">zset(sorted set：有序集合)</a></li>
<li><a href="#各个数据类型应用场景">各个数据类型应用场景</a></li>
<li><a href="#备注-1">备注</a></li>
</ul></li>
<li><a href="#redis-命令">Redis 命令</a>
<ul>
<li><a href="#redis-命令-1">Redis 命令</a></li>
<li><a href="#在远程服务上执行命令">在远程服务上执行命令</a></li>
<li><a href="#redis-键-key">Redis 键(key)</a>
<ul>
<li><a href="#redis-keys-命令">Redis keys 命令</a></li>
</ul></li>
<li><a href="#redis-字符串-string">Redis 字符串(String)</a>
<ul>
<li><a href="#redis-字符串命令">Redis 字符串命令</a></li>
</ul></li>
<li><a href="#redis-哈希-hash">Redis 哈希(Hash)</a>
<ul>
<li><a href="#redis-hash-命令">Redis hash 命令</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

<h1 id="简介">简介</h1>

<p>REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。</p>

<p>Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p>

<p>它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Hash), 列表(list), 集合(sets) 和 有序集合(sorted sets)等类型。</p>

<p>Redis 是完全开源免费的，遵守BSD协议，是一个高性能的key-value数据库。</p>

<p>Redis 与其他 key - value 缓存产品有以下三个特点：</p>

<ul>
<li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li>
<li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li>
<li>Redis支持数据的备份，即master-slave模式的数据备份。</li>
</ul>

<blockquote>
<p>Redis 官网：<a href="https://redis.io/">https://redis.io/</a></p>

<p>Redis 在线测试：<a href="http://try.redis.io/">http://try.redis.io/</a></p>

<p>Redis 命令参考：<a href="http://doc.redisfans.com/">http://doc.redisfans.com/</a></p>
</blockquote>

<h2 id="redis-优势">Redis 优势</h2>

<ul>
<li>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</li>
<li>丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li>
<li>原子 – Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</li>
<li>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>
</ul>

<h2 id="redis与其他key-value存储有什么不同">Redis与其他key-value存储有什么不同？</h2>

<ul>
<li>Redis有着更为复杂的数据结构并且提供对他们的原子性操作，这是一个不同于其他数据库的进化路径。Redis的数据类型都是基于基本数据结构的同时对程序员透明，无需进行额外的抽象。</li>
<li>Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，因为数据量不能大于硬件内存。在内存数据库方面的另一个优点是，相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。</li>
</ul>

<h1 id="redis-安装">Redis 安装</h1>

<h2 id="window-下安装">Window 下安装</h2>

<p>Github 下载地址：<a href="https://github.com/MicrosoftArchive/redis/tags">https://github.com/MicrosoftArchive/redis/tags</a></p>

<p>下载的时候下载 msi 安装文件：</p>

<p><img src="https://sltaurusblog.gitee.io/images/Redis/RedisMsi.png" alt="" /></p>

<p>注意：</p>

<p><img src="https://sltaurusblog.gitee.io/images/Redis/MaxMemory.png" alt="" /></p>

<p>如果 redis 的应用场景是作为数据库使用，那不要设置这个选项，因为数据库是不能容忍丢失数据的。</p>

<p>如果作为临时缓存那就得看自己的需要（我这里设置了 1024M 的最大内存限制）</p>

<p>指定 Redis 最大内存限制，Redis 在启动时会把数据加载到内存中，达到最大内存后，Redis 会先尝试清除已到期或即将到期的 Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis 新的 vm 机制，会把 Key 存放内存，Value 会存放在 swap区。</p>

<h3 id="测试所安装的redis">测试所安装的Redis</h3>

<p>如果你是和我一样通过msi文件的安装，你可以在 “计算机管理→服务与应用程序→服务” 看到Redis正在运行</p>

<p><img src="https://sltaurusblog.gitee.io/images/Redis/redisServer.png" alt="" /></p>

<p>你也可以将它停止(不停止会出现错误代码为 18012 的错误，表示本机端口 6379 被占用)，然后在 cmd 窗口进入Redis的安装路径的根目录</p>

<p>输入命令 <code>redis-server.exe redis.windows.conf</code>，出现下图证明 Redis 服务启动成功：</p>

<p><img src="https://sltaurusblog.gitee.io/images/Redis/RedisTest.png" alt="" /></p>

<p>下面进行测试：</p>

<p>你可以在 Redis 的安装根目录下找到 redis-cli.exe 文件启动(我用的是这种方法)，或在 cmd 中先进入 Redis 的安装根目录用命令 redis-cli.exe -h 192.168.10.61 -p 6379（注意换成自己的 IP，本地可以是 127.0.0.1）的方式打开</p>

<p>测试方法：设置键值对，取出键值对（我这里键值对是 peng）</p>

<p><img src="https://sltaurusblog.gitee.io/images/Redis/RedisPengTest.png" alt="" /></p>

<h2 id="linux-下安装">Linux 下安装</h2>

<p>下载地址：<a href="http://redis.io/download，下载最新稳定版本。">http://redis.io/download，下载最新稳定版本。</a></p>

<p>本教程使用的最新文档版本为 2.8.17，下载并安装：</p>

<pre><code>$ wget http://download.redis.io/releases/redis-2.8.17.tar.gz
$ tar xzf redis-2.8.17.tar.gz
$ cd redis-2.8.17
$ make
</code></pre>

<p>make完后 redis-2.8.17目录下会出现编译后的redis服务程序redis-server,还有用于测试的客户端程序redis-cli,两个程序位于安装目录 src 目录下：</p>

<p>下面启动redis服务。</p>

<pre><code>$ cd src
$ ./redis-server
</code></pre>

<p>注意这种方式启动redis 使用的是默认配置。也可以通过启动参数告诉redis使用指定配置文件使用下面命令启动。</p>

<pre><code>$ cd src
$ ./redis-server ../redis.conf
</code></pre>

<p>redis.conf 是一个默认的配置文件。我们可以根据需要使用自己的配置文件。</p>

<p>启动redis服务进程后，就可以使用测试客户端程序redis-cli和redis服务交互了。 比如：</p>

<pre><code>$ cd src
$ ./redis-cli
redis&gt; set foo bar
OK
redis&gt; get foo
&quot;bar&quot;
</code></pre>

<h2 id="ubuntu-下安装">Ubuntu 下安装</h2>

<p>在 Ubuntu 系统安装 Redis 可以使用以下命令:</p>

<pre><code>$sudo apt-get update
$sudo apt-get install redis-server
</code></pre>

<p>启动 Redis</p>

<pre><code>$ redis-server
</code></pre>

<p>查看 redis 是否启动？</p>

<pre><code>$ redis-cli
</code></pre>

<p>以上命令将打开以下终端：</p>

<pre><code>redis 127.0.0.1:6379&gt;
</code></pre>

<p>127.0.0.1 是本机 IP ，6379 是 redis 服务端口。现在我们输入 PING 命令。</p>

<pre><code>redis 127.0.0.1:6379&gt; ping
PONG
</code></pre>

<p>以上说明我们已经成功安装了redis。</p>

<h2 id="mac-下安装">Mac 下安装</h2>

<p>官网<a href="http://redis.io/">http://redis.io/</a> 下载最新的稳定版本,这里是3.2.0</p>

<ul>
<li><p>sudo mv 到 /usr/local/</p></li>

<li><p>sudo tar -zxf redis-3.2.0.tar 解压文件</p></li>

<li><p>进入解压后的目录 cd redis-3.2.0</p></li>

<li><p>sudo make test 测试编译</p></li>

<li><p>sudo make install</p></li>
</ul>

<p>mac 下安装也可以使用 homebrew，homebrew 是 mac 的包管理器。</p>

<ul>
<li><p>执行 brew install redis</p></li>

<li><p>启动 redis，可以使用后台服务启动 brew services start redis。或者直接启动：redis-server /usr/local/etc/redis.conf</p></li>
</ul>

<h1 id="redis-配置">Redis 配置</h1>

<p>Redis 的配置文件位于 Redis 安装目录下，文件名为 redis.conf(Windows 名为 redis.windows.conf)。</p>

<p>你可以通过 CONFIG 命令查看或设置配置项。</p>

<p>语法：</p>

<p>Redis CONFIG 命令格式如下：</p>

<pre><code>redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME
</code></pre>

<p>实例：</p>

<pre><code>redis 127.0.0.1:6379&gt; CONFIG GET loglevel

1) &quot;loglevel&quot;
2) &quot;notice&quot;
</code></pre>

<p>使用 * 号获取所有配置项：</p>

<p>实例:</p>

<pre><code>redis 127.0.0.1:6379&gt; CONFIG GET *

1) &quot;dbfilename&quot;
2) &quot;dump.rdb&quot;
3) &quot;requirepass&quot;
4) &quot;&quot;
5) &quot;masterauth&quot;
6) &quot;&quot;
7) &quot;unixsocket&quot;
8) &quot;&quot;
9) &quot;logfile&quot;
10) &quot;&quot;
11) &quot;pidfile&quot;
12) &quot;/var/run/redis.pid&quot;
13) &quot;maxmemory&quot;
14) &quot;0&quot;
15) &quot;maxmemory-samples&quot;
16) &quot;3&quot;
17) &quot;timeout&quot;
18) &quot;0&quot;
19) &quot;tcp-keepalive&quot;
20) &quot;0&quot;
21) &quot;auto-aof-rewrite-percentage&quot;
22) &quot;100&quot;
23) &quot;auto-aof-rewrite-min-size&quot;
24) &quot;67108864&quot;
25) &quot;hash-max-ziplist-entries&quot;
26) &quot;512&quot;
27) &quot;hash-max-ziplist-value&quot;
28) &quot;64&quot;
29) &quot;list-max-ziplist-entries&quot;
30) &quot;512&quot;
31) &quot;list-max-ziplist-value&quot;
32) &quot;64&quot;
33) &quot;set-max-intset-entries&quot;
34) &quot;512&quot;
35) &quot;zset-max-ziplist-entries&quot;
36) &quot;128&quot;
37) &quot;zset-max-ziplist-value&quot;
38) &quot;64&quot;
39) &quot;hll-sparse-max-bytes&quot;
40) &quot;3000&quot;
41) &quot;lua-time-limit&quot;
42) &quot;5000&quot;
43) &quot;slowlog-log-slower-than&quot;
44) &quot;10000&quot;
45) &quot;latency-monitor-threshold&quot;
46) &quot;0&quot;
47) &quot;slowlog-max-len&quot;
48) &quot;128&quot;
49) &quot;port&quot;
50) &quot;6379&quot;
51) &quot;tcp-backlog&quot;
52) &quot;511&quot;
53) &quot;databases&quot;
54) &quot;16&quot;
55) &quot;repl-ping-slave-period&quot;
56) &quot;10&quot;
57) &quot;repl-timeout&quot;
58) &quot;60&quot;
59) &quot;repl-backlog-size&quot;
60) &quot;1048576&quot;
61) &quot;repl-backlog-ttl&quot;
62) &quot;3600&quot;
63) &quot;maxclients&quot;
64) &quot;4064&quot;
65) &quot;watchdog-period&quot;
66) &quot;0&quot;
67) &quot;slave-priority&quot;
68) &quot;100&quot;
69) &quot;min-slaves-to-write&quot;
70) &quot;0&quot;
71) &quot;min-slaves-max-lag&quot;
72) &quot;10&quot;
73) &quot;hz&quot;
74) &quot;10&quot;
75) &quot;no-appendfsync-on-rewrite&quot;
76) &quot;no&quot;
77) &quot;slave-serve-stale-data&quot;
78) &quot;yes&quot;
79) &quot;slave-read-only&quot;
80) &quot;yes&quot;
81) &quot;stop-writes-on-bgsave-error&quot;
82) &quot;yes&quot;
83) &quot;daemonize&quot;
84) &quot;no&quot;
85) &quot;rdbcompression&quot;
86) &quot;yes&quot;
87) &quot;rdbchecksum&quot;
88) &quot;yes&quot;
89) &quot;activerehashing&quot;
90) &quot;yes&quot;
91) &quot;repl-disable-tcp-nodelay&quot;
92) &quot;no&quot;
93) &quot;aof-rewrite-incremental-fsync&quot;
94) &quot;yes&quot;
95) &quot;appendonly&quot;
96) &quot;no&quot;
97) &quot;dir&quot;
98) &quot;/home/deepak/Downloads/redis-2.8.13/src&quot;
99) &quot;maxmemory-policy&quot;
100) &quot;volatile-lru&quot;
101) &quot;appendfsync&quot;
102) &quot;everysec&quot;
103) &quot;save&quot;
104) &quot;3600 1 300 100 60 10000&quot;
105) &quot;loglevel&quot;
106) &quot;notice&quot;
107) &quot;client-output-buffer-limit&quot;
108) &quot;normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60&quot;
109) &quot;unixsocketperm&quot;
110) &quot;0&quot;
111) &quot;slaveof&quot;
112) &quot;&quot;
113) &quot;notify-keyspace-events&quot;
114) &quot;&quot;
115) &quot;bind&quot;
116) &quot;&quot;
</code></pre>

<h2 id="编辑配置">编辑配置</h2>

<p>你可以通过修改 redis.conf 文件或使用 CONFIG set 命令来修改配置。</p>

<p>CONFIG SET 命令基本语法：</p>

<pre><code>redis 127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
</code></pre>

<p>实例:</p>

<pre><code>redis 127.0.0.1:6379&gt; CONFIG SET loglevel &quot;notice&quot;
OK
redis 127.0.0.1:6379&gt; CONFIG GET loglevel

1) &quot;loglevel&quot;
2) &quot;notice&quot;
</code></pre>

<h3 id="参数说明">参数说明</h3>

<p>redis.conf 配置项说明如下：</p>

<table>
<thead>
<tr>
<th align="left">序号</th>
<th align="left">配置项</th>
<th align="left">说明</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">1</td>
<td align="left">daemonize no</td>
<td align="left">Redis 默认不是以守护进程的方式运行，可以通过该配置项修改，使用 yes 启用守护进程（Windows 不支持守护线程的配置为 no ）</td>
</tr>

<tr>
<td align="left">2</td>
<td align="left">pidfile /var/run/redis.pid</td>
<td align="left">当 Redis 以守护进程方式运行时，Redis 默认会把 pid 写入 /var/run/redis.pid 文件，可以通过 pidfile 指定</td>
</tr>

<tr>
<td align="left">3</td>
<td align="left">port 6379</td>
<td align="left">指定 Redis 监听端口，默认端口为 6379，作者在自己的一篇博文中解释了为什么选用 6379 作为默认端口，因为 6379 在手机按键上 MERZ 对应的号码，而 MERZ 取自意大利歌女 Alessia Merz 的名字</td>
</tr>

<tr>
<td align="left">4</td>
<td align="left">bind 127.0.0.1</td>
<td align="left">绑定的主机地址</td>
</tr>

<tr>
<td align="left">5</td>
<td align="left">timeout 300</td>
<td align="left">当客户端闲置多长秒后关闭连接，如果指定为 0 ，表示关闭该功能</td>
</tr>

<tr>
<td align="left">6</td>
<td align="left">loglevel notice</td>
<td align="left">指定日志记录级别，Redis 总共支持四个级别：debug、verbose、notice、warning，默认为 notice</td>
</tr>

<tr>
<td align="left">7</td>
<td align="left">logfile stdout</td>
<td align="left">日志记录方式，默认为标准输出，如果配置 Redis 为守护进程方式运行，而这里又配置为日志记录方式为标准输出，则日志将会发送给 /dev/null</td>
</tr>

<tr>
<td align="left">8</td>
<td align="left">databases 16</td>
<td align="left">设置数据库的数量，默认数据库为0，可以使用SELECT 命令在连接上指定数据库id</td>
</tr>

<tr>
<td align="left">9</td>
<td align="left">save <seconds> <changes></td>
<td align="left">指定在多长时间内，有多少次更新操作，就将数据同步到数据文件，可以多个条件配合 。Redis 默认配置文件中提供了三个条件：save 900 1，，save 300 10，save 60 10000，分别表示 900 秒（15 分钟）内有 1 个更改，300 秒（5 分钟）内有 10 个更改以及 60 秒内有 10000 个更改。</td>
</tr>

<tr>
<td align="left">10</td>
<td align="left">rdbcompression yes</td>
<td align="left">指定存储至本地数据库时是否压缩数据，默认为 yes，Redis 采用 LZF 压缩，如果为了节省 CPU 时间，可以关闭该选项，但会导致数据库文件变的巨大</td>
</tr>

<tr>
<td align="left">11</td>
<td align="left">dbfilename dump.rdb</td>
<td align="left">指定本地数据库文件名，默认值为 dump.rdb</td>
</tr>

<tr>
<td align="left">12</td>
<td align="left">dir ./</td>
<td align="left">指定本地数据库存放目录</td>
</tr>

<tr>
<td align="left">13</td>
<td align="left">slaveof <masterip> <masterport></td>
<td align="left">设置当本机为 slave 服务时，设置 master 服务的 IP 地址及端口，在 Redis 启动时，它会自动从 master 进行数据同步</td>
</tr>

<tr>
<td align="left">14</td>
<td align="left">masterauth <master-password></td>
<td align="left">当 master 服务设置了密码保护时，slav 服务连接 master 的密码</td>
</tr>

<tr>
<td align="left">15</td>
<td align="left">requirepass foobared</td>
<td align="left">设置 Redis 连接密码，如果配置了连接密码，客户端在连接 Redis 时需要通过 AUTH <password> 命令提供密码，默认关闭</td>
</tr>

<tr>
<td align="left">16</td>
<td align="left">maxclients 128</td>
<td align="left">设置同一时间最大客户端连接数，默认无限制，Redis 可以同时打开的客户端连接数为 Redis 进程可以打开的最大文件描述符数，如果设置 maxclients 0，表示不作限制。当客户端连接数到达限制时，Redis 会关闭新的连接并向客户端返回 max number of clients reached 错误信息</td>
</tr>

<tr>
<td align="left">17</td>
<td align="left">maxmemory <bytes></td>
<td align="left">指定 Redis 最大内存限制，Redis 在启动时会把数据加载到内存中，达到最大内存后，Redis 会先尝试清除已到期或即将到期的 Key，当此方法处理 后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作。Redis 新的 vm 机制，会把 Key 存放内存，Value 会存放在 swap 区</td>
</tr>

<tr>
<td align="left">18</td>
<td align="left">appendonly no</td>
<td align="left">指定是否在每次更新操作后进行日志记录，Redis 在默认情况下是异步的把数据写入磁盘，如果不开启，可能会在断电时导致一段时间内的数据丢失。因为 redis 本身同步数据文件是按上面 save 条件来同步的，所以有的数据会在一段时间内只存在于内存中。默认为 no</td>
</tr>

<tr>
<td align="left">19</td>
<td align="left">appendfilename appendonly.aof</td>
<td align="left">指定更新日志文件名，默认为 appendonly.aof</td>
</tr>

<tr>
<td align="left">20</td>
<td align="left">appendfsync everysec</td>
<td align="left">指定更新日志条件，共有 3 个可选值：no：表示等操作系统进行数据缓存同步到磁盘（快），always：表示每次更新操作后手动调用 fsync()，将数据写到磁盘（慢，安全），everysec：表示每秒同步一次（折中，默认值）</td>
</tr>

<tr>
<td align="left">21</td>
<td align="left">vm-enabled no</td>
<td align="left">指定是否启用虚拟内存机制，默认值为 no，简单的介绍一下，VM 机制将数据分页存放，由 Redis 将访问量较少的页即冷数据 swap 到磁盘上，访问多的页面由磁盘自动换出到内存中（在后面的文章我会仔细分析 Redis 的 VM 机制）</td>
</tr>

<tr>
<td align="left">22</td>
<td align="left">vm-swap-file /tmp/redis.swap</td>
<td align="left">虚拟内存文件路径，默认值为 /tmp/redis.swap，不可多个 Redis 实例共享</td>
</tr>

<tr>
<td align="left">23</td>
<td align="left">vm-max-memory 0</td>
<td align="left">将所有大于 vm-max-memory 的数据存入虚拟内存，无论 vm-max-memory 设置多小，所有索引数据都是内存存储的(Redis 的索引数据 就是 keys)，也就是说，当 vm-max-memory 设置为 0 的时候，其实是所有 value 都存在于磁盘。默认值为 0</td>
</tr>

<tr>
<td align="left">24</td>
<td align="left">vm-page-size 32</td>
<td align="left">Redis swap 文件分成了很多的 page，一个对象可以保存在多个 page 上面，但一个 page 上不能被多个对象共享，vm-page-size 是要根据存储的 数据大小来设定的，作者建议如果存储很多小对象，page 大小最好设置为 32 或者 64bytes；如果存储很大大对象，则可以使用更大的 page，如果不确定，就使用默认值</td>
</tr>

<tr>
<td align="left">25</td>
<td align="left">vm-pages 134217728</td>
<td align="left">设置 swap 文件中的 page 数量，由于页表（一种表示页面空闲或使用的 bitmap）是在放在内存中的，，在磁盘上每 8 个 pages 将消耗 1byte 的内存。</td>
</tr>

<tr>
<td align="left">26</td>
<td align="left">vm-max-threads 4</td>
<td align="left">设置访问swap文件的线程数,最好不要超过机器的核数,如果设置为0,那么所有对swap文件的操作都是串行的，可能会造成比较长时间的延迟。默认值为4</td>
</tr>

<tr>
<td align="left">27</td>
<td align="left">glueoutputbuf yes</td>
<td align="left">设置在向客户端应答时，是否把较小的包合并为一个包发送，默认为开启</td>
</tr>

<tr>
<td align="left">28</td>
<td align="left">hash-max-zipmap-entries 64 hash-max-zipmap-value 512</td>
<td align="left">指定在超过一定的数量或者最大的元素超过某一临界值时，采用一种特殊的哈希算法</td>
</tr>

<tr>
<td align="left">29</td>
<td align="left">activerehashing yes</td>
<td align="left">指定是否激活重置哈希，默认为开启（后面在介绍 Redis 的哈希算法时具体介绍）</td>
</tr>

<tr>
<td align="left">30</td>
<td align="left">include /path/to/local.conf</td>
<td align="left">指定包含其它的配置文件，可以在同一主机上多个Redis实例之间使用同一份配置文件，而同时各个实例又拥有自己的特定配置文件</td>
</tr>
</tbody>
</table>

<h2 id="备注">备注</h2>

<p><strong>什么是守护进程？</strong></p>

<p>守护进程（Daemon Process），也就是通常说的 Daemon 进程（精灵进程），是 Linux 中的后台服务进程。它是一个生存期较长的进程，通常独立于控制终端并且周期性地执行某种任务或等待处理某些发生的事件。</p>

<p>守护进程是个特殊的孤儿进程，这种进程脱离终端，为什么要脱离终端呢？之所以脱离于终端是为了避免进程被任何终端所产生的信息所打断，其在执行过程中的信息也不在任何终端上显示。由于在 linux 中，每一个系统与用户进行交流的界面称为终端，每一个从此终端开始运行的进程都会依附于这个终端，这个终端就称为这些进程的控制终端，当控制终端被关闭时，相应的进程都会自动关闭。</p>

<p><strong>配置 redis 外网可访问</strong></p>

<p>由于 redis 采用的安全策略，默认会只准许本地访问。需要通过简单配置，完成允许外网访问。</p>

<p>修改 redis 的配置文件，将所有 bind 信息全部屏蔽。</p>

<pre><code># bind 192.168.1.100 10.0.0.1 
# bind 192.168.1.8 
# bind 127.0.0.1
</code></pre>

<p>修改完成后，需要重新启动 redis 服务。</p>

<p>修改 Linux 的防火墙(iptables)，开启你的 redis 服务端口，默认是 6379。</p>

<pre><code>-A INPUT -m state –state NEW -m tcp -p tcp –dport 6379 -j ACCEPT 
…… 
-A INPUT -j REJECT –reject-with icmp-host-prohibited
</code></pre>

<p>请注意，一定要将 redis 的防火墙配置放在 REJECT 的前面。然后执行 service iptables restart。至此，就能够链接到 redis 服务，并且能够正确显示了。</p>

<p><strong>强烈建议：不要在公网访问 redis,因为 redis 的处理速度非常快，所以如果你的密码比较简单，很容易就会通过暴力破解破解出密码。</strong></p>

<pre><code># Warning: since Redis is pretty fast an outside user can try up to
# 150k passwords per second against a good box. This means that you should
# use a very strong password otherwise it will be very easy to break.
</code></pre>

<h1 id="redis-数据类型">Redis 数据类型</h1>

<p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及zset(sorted set：有序集合)。</p>

<h2 id="string-字符串">String（字符串）</h2>

<p>string 是 redis 最基本的类型，你可以理解成与 Memcached 一模一样的类型，一个 key 对应一个 value。</p>

<p>string 类型是二进制安全的。意思是 redis 的 string 可以包含任何数据。比如jpg图片或者序列化的对象。</p>

<p>string 类型是 Redis 最基本的数据类型，string 类型的值最大能存储 512MB。</p>

<p>实例：</p>

<pre><code>redis 127.0.0.1:6379&gt; SET runoob &quot;菜鸟教程&quot;
OK
redis 127.0.0.1:6379&gt; GET runoob
&quot;菜鸟教程&quot;
</code></pre>

<p>在以上实例中我们使用了 Redis 的 SET 和 GET 命令。键为 runoob，对应的值为 菜鸟教程。</p>

<p><strong>注意：一个键最大能存储 512MB。</strong></p>

<h2 id="hash-哈希">Hash（哈希）</h2>

<p>Redis hash 是一个键值(key=&gt;value)对集合。</p>

<p>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。</p>

<p>实例</p>

<p>DEL runoob 用于删除前面测试用过的 key，不然会报错：(error) WRONGTYPE Operation against a key holding the wrong kind of value</p>

<pre><code>redis 127.0.0.1:6379&gt; DEL runoob
redis 127.0.0.1:6379&gt; HMSET runoob field1 &quot;Hello&quot; field2 &quot;World&quot;
&quot;OK&quot;
redis 127.0.0.1:6379&gt; HGET runoob field1
&quot;Hello&quot;
redis 127.0.0.1:6379&gt; HGET runoob field2
&quot;World&quot;
</code></pre>

<p>实例中我们使用了 Redis HMSET, HGET 命令，HMSET 设置了两个 field=&gt;value 对, HGET 获取对应 field 对应的 value。每个 hash 可以存储2的32次方 -1键值对（40多亿）。</p>

<h2 id="list-列表">List（列表）</h2>

<p>Redis 列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）。</p>

<p>实例</p>

<pre><code>redis 127.0.0.1:6379&gt; DEL runoob
redis 127.0.0.1:6379&gt; lpush runoob redis
(integer) 1
redis 127.0.0.1:6379&gt; lpush runoob mongodb
(integer) 2
redis 127.0.0.1:6379&gt; lpush runoob rabitmq
(integer) 3
redis 127.0.0.1:6379&gt; lrange runoob 0 10
1) &quot;rabitmq&quot;
2) &quot;mongodb&quot;
3) &quot;redis&quot;
redis 127.0.0.1:6379&gt;
</code></pre>

<p>列表最多可存储2的32次方 - 1 元素 (4294967295, 每个列表可存储40多亿)。</p>

<h2 id="set-集合">Set（集合）</h2>

<p>Redis 的 Set 是 string 类型的无序集合。</p>

<p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。</p>

<p>sadd 命令：添加一个 string 元素到 key 对应的 set 集合中，成功返回 1，如果元素已经在集合中返回 0。</p>

<pre><code>sadd key member
</code></pre>

<p>实例</p>

<pre><code>redis 127.0.0.1:6379&gt; DEL runoob
redis 127.0.0.1:6379&gt; sadd runoob redis
(integer) 1
redis 127.0.0.1:6379&gt; sadd runoob mongodb
(integer) 1
redis 127.0.0.1:6379&gt; sadd runoob rabitmq
(integer) 1
redis 127.0.0.1:6379&gt; sadd runoob rabitmq
(integer) 0
redis 127.0.0.1:6379&gt; smembers runoob

1) &quot;redis&quot;
2) &quot;rabitmq&quot;
3) &quot;mongodb&quot;
</code></pre>

<p>注意：以上实例中 rabitmq 添加了两次，但根据集合内元素的唯一性，第二次插入的元素将被忽略。</p>

<p>集合中最大的成员数为2的32次方 - 1(4294967295, 每个集合可存储40多亿个成员)。</p>

<h2 id="zset-sorted-set-有序集合">zset(sorted set：有序集合)</h2>

<p>Redis zset 和 set 一样也是string类型元素的集合,且不允许重复的成员。</p>

<p>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。</p>

<p>zset的成员是唯一的,但分数(score)却可以重复。</p>

<p>zadd 命令：添加元素到集合，元素在集合中存在则更新对应score。</p>

<pre><code>zadd key score member 
</code></pre>

<p>实例</p>

<pre><code>redis 127.0.0.1:6379&gt; DEL runoob
redis 127.0.0.1:6379&gt; zadd runoob 0 redis
(integer) 1
redis 127.0.0.1:6379&gt; zadd runoob 0 mongodb
(integer) 1
redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq
(integer) 1
redis 127.0.0.1:6379&gt; zadd runoob 0 rabitmq
(integer) 0
redis 127.0.0.1:6379&gt; &gt; ZRANGEBYSCORE runoob 0 1000
1) &quot;mongodb&quot;
2) &quot;rabitmq&quot;
3) &quot;redis&quot;
</code></pre>

<h2 id="各个数据类型应用场景">各个数据类型应用场景</h2>

<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">简介</th>
<th align="left">特性</th>
<th align="left">场景</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">String(字符串)</td>
<td align="left">二进制安全</td>
<td align="left">可以包含任何数据,比如jpg图片或者序列化的对象,一个键最大能存储512M</td>
<td align="left"></td>
</tr>

<tr>
<td align="left">Hash(字典)</td>
<td align="left">键值对集合,即编程语言中的Map类型</td>
<td align="left">适合存储对象,并且可以像数据库中update一个属性一样只修改某一项属性值(Memcached中需要取出整个字符串反序列化成对象修改完再序列化存回去)</td>
<td align="left">存储、读取、修改用户属性</td>
</tr>

<tr>
<td align="left">List(列表)</td>
<td align="left">链表(双向链表)</td>
<td align="left">增删快,提供了操作某一段元素的API</td>
<td align="left">1,最新消息排行等功能(比如朋友圈的时间线) 2,消息队列</td>
</tr>

<tr>
<td align="left">Set(集合)</td>
<td align="left">哈希表实现,元素不重复</td>
<td align="left">1、添加、删除,查找的复杂度都是O(1) 2、为集合提供了求交集、并集、差集等操作</td>
<td align="left">1、共同好友 2、利用唯一性,统计访问网站的所有独立ip 3、好友推荐时,根据tag求交集,大于某个阈值就可以推荐</td>
</tr>

<tr>
<td align="left">Sorted Set(有序集合)</td>
<td align="left">将Set中的元素增加一个权重参数score,元素按score有序排列</td>
<td align="left">数据插入集合时,已经进行天然排序</td>
<td align="left">1、排行榜 2、带权重的消息队列</td>
</tr>
</tbody>
</table>

<h2 id="备注-1">备注</h2>

<p>注意：Redis支持多个数据库，并且每个数据库的数据是隔离的不能共享，并且基于单机才有，如果是集群就没有数据库的概念。</p>

<p>Redis是一个字典结构的存储服务器，而实际上一个Redis实例提供了多个用来存储数据的字典，客户端可以指定将数据存储在哪个字典中。这与我们熟知的在一个关系数据库实例中可以创建多个数据库类似，所以可以将其中的每个字典都理解成一个独立的数据库。</p>

<p>每个数据库对外都是一个从0开始的递增数字命名，Redis默认支持16个数据库（可以通过配置文件支持更多，无上限），可以通过配置databases来修改这一数字。客户端与Redis建立连接后会自动选择0号数据库，不过可以随时使用SELECT命令更换数据库，如要选择1号数据库：</p>

<pre><code>redis&gt; SELECT 1
OK
redis [1] &gt; GET foo
(nil)
</code></pre>

<p>然而这些以数字命名的数据库又与我们理解的数据库有所区别。首先Redis不支持自定义数据库的名字，每个数据库都以编号命名，开发者必须自己记录哪些数据库存储了哪些数据。另外Redis也不支持为每个数据库设置不同的访问密码，所以一个客户端要么可以访问全部数据库，要么连一个数据库也没有权限访问。最重要的一点是多个数据库之间并不是完全隔离的，比如FLUSHALL命令可以清空一个Redis实例中所有数据库中的数据。综上所述，这些数据库更像是一种命名空间，而不适宜存储不同应用程序的数据。比如可以使用0号数据库存储某个应用生产环境中的数据，使用1号数据库存储测试环境中的数据，但不适宜使用0号数据库存储A应用的数据而使用1号数据库B应用的数据，不同的应用应该使用不同的Redis实例存储数据。由于Redis非常轻量级，一个空Redis实例占用的内在只有1M左右，所以不用担心多个Redis实例会额外占用很多内存。</p>

<h1 id="redis-命令">Redis 命令</h1>

<h2 id="redis-命令-1">Redis 命令</h2>

<p>Redis 命令用于在 redis 服务上执行操作。</p>

<p>要在 redis 服务上执行命令需要一个 redis 客户端。Redis 客户端在我们之前下载的的 redis 的安装包中。</p>

<p><strong>语法</strong></p>

<p>Redis 客户端的基本语法为：</p>

<pre><code>$ redis-cli
</code></pre>

<p><strong>实例</strong></p>

<p>以下实例讲解了如何启动 redis 客户端：</p>

<p>启动 redis 客户端，打开终端并输入命令 redis-cli。该命令会连接本地的 redis 服务。</p>

<pre><code>$redis-cli
redis 127.0.0.1:6379&gt;
redis 127.0.0.1:6379&gt; PING

PONG
</code></pre>

<p>在以上实例中我们连接到本地的 redis 服务并执行 PING 命令，该命令用于检测 redis 服务是否启动。</p>

<p>有时候会有中文乱码。</p>

<p>要在 redis-cli 后面加上 &ndash;raw</p>

<pre><code>redis-cli --raw
</code></pre>

<p>就可以避免中文乱码了。</p>

<h2 id="在远程服务上执行命令">在远程服务上执行命令</h2>

<p>如果需要在远程 redis 服务上执行命令，同样我们使用的也是 redis-cli 命令。</p>

<p><strong>语法</strong></p>

<p>$ redis-cli -h host -p port -a password</p>

<p><strong>实例</strong></p>

<p>以下实例演示了如何连接到主机为 127.0.0.1，端口为 6379 ，密码为 mypass 的 redis 服务上。</p>

<pre><code>$redis-cli -h 127.0.0.1 -p 6379 -a &quot;mypass&quot;
redis 127.0.0.1:6379&gt;
redis 127.0.0.1:6379&gt; PING

PONG
</code></pre>

<h2 id="redis-键-key">Redis 键(key)</h2>

<p>Redis 键命令用于管理 redis 的键。</p>

<p><strong>语法</strong></p>

<p>Redis 键命令的基本语法如下：</p>

<pre><code>redis 127.0.0.1:6379&gt; COMMAND KEY_NAME
</code></pre>

<p><strong>实例</strong></p>

<pre><code>redis 127.0.0.1:6379&gt; SET runoobkey redis
OK
redis 127.0.0.1:6379&gt; DEL runoobkey
(integer) 1
</code></pre>

<p>在以上实例中 DEL 是一个命令， runoobkey 是一个键。 如果键被删除成功，命令执行后输出 (integer) 1，否则将输出 (integer) 0</p>

<h3 id="redis-keys-命令">Redis keys 命令</h3>

<p>下表给出了与 Redis 键相关的基本命令：</p>

<table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">DEL key</td>
<td align="left">该命令用于在 key 存在时删除 key。</td>
</tr>

<tr>
<td align="left">DUMP key</td>
<td align="left">序列化给定 key ，并返回被序列化的值。</td>
</tr>

<tr>
<td align="left">EXISTS key</td>
<td align="left">检查给定 key 是否存在。</td>
</tr>

<tr>
<td align="left">EXPIRE key seconds</td>
<td align="left">为给定 key 设置过期时间，以秒计。</td>
</tr>

<tr>
<td align="left">EXPIREAT key timestamp</td>
<td align="left">EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。</td>
</tr>

<tr>
<td align="left">PEXPIRE key milliseconds</td>
<td align="left">设置 key 的过期时间以毫秒计。</td>
</tr>

<tr>
<td align="left">PEXPIREAT key milliseconds-timestamp</td>
<td align="left">设置 key 过期时间的时间戳(unix timestamp) 以毫秒计</td>
</tr>

<tr>
<td align="left">KEYS pattern</td>
<td align="left">查找所有符合给定模式( pattern)的 key 。例子：KEYS runoob*，即查runoob开头的。类似LIke ‘Test%’。获取 redis 中所有的 key 可用使用KEYS *</td>
</tr>

<tr>
<td align="left">MOVE key db</td>
<td align="left">将当前数据库的 key 移动到给定的数据库 db 当中。</td>
</tr>

<tr>
<td align="left">PERSIST key</td>
<td align="left">移除 key 的过期时间，key 将持久保持。</td>
</tr>

<tr>
<td align="left">PTTL key</td>
<td align="left">以毫秒为单位返回 key 的剩余的过期时间。</td>
</tr>

<tr>
<td align="left">TTL key</td>
<td align="left">以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)。</td>
</tr>

<tr>
<td align="left">RANDOMKEY</td>
<td align="left">从当前数据库中随机返回一个 key 。</td>
</tr>

<tr>
<td align="left">RENAME key newkey</td>
<td align="left">修改 key 的名称</td>
</tr>

<tr>
<td align="left">RENAMENX key newkey</td>
<td align="left">仅当 newkey 不存在时，将 key 改名为 newkey 。</td>
</tr>

<tr>
<td align="left">SCAN cursor [MATCH pattern] [COUNT count]</td>
<td align="left">迭代数据库中的数据库键。</td>
</tr>

<tr>
<td align="left">TYPE key</td>
<td align="left">返回 key 所储存的值的类型。</td>
</tr>
</tbody>
</table>

<h2 id="redis-字符串-string">Redis 字符串(String)</h2>

<p>Redis 字符串数据类型的相关命令用于管理 redis 字符串值，基本语法如下：</p>

<p><strong>语法</strong></p>

<pre><code>redis 127.0.0.1:6379&gt; COMMAND KEY_NAME
</code></pre>

<p><strong>实例</strong></p>

<pre><code>redis 127.0.0.1:6379&gt; SET runoobkey redis
OK
redis 127.0.0.1:6379&gt; GET runoobkey
&quot;redis&quot;
</code></pre>

<p>在以上实例中我们使用了 SET 和 GET 命令，键为 runoobkey。</p>

<h3 id="redis-字符串命令">Redis 字符串命令</h3>

<p>下表列出了常用的 redis 字符串命令：</p>

<table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">描述</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">SET key value</td>
<td align="left">设置指定 key 的值</td>
</tr>

<tr>
<td align="left">GET key</td>
<td align="left">获取指定 key 的值。</td>
</tr>

<tr>
<td align="left">GETRANGE key start end</td>
<td align="left">返回 key 中字符串值的子字符。start开始，从0开始。end 结束，包括开始的字符串</td>
</tr>

<tr>
<td align="left">GETSET key value</td>
<td align="left">将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</td>
</tr>

<tr>
<td align="left">GETBIT key offset</td>
<td align="left">对 key 所储存的字符串值，获取指定偏移量上的位(bit)。</td>
</tr>

<tr>
<td align="left">MGET key1 [key2..]</td>
<td align="left">获取所有(一个或多个)给定 key 的值。</td>
</tr>

<tr>
<td align="left">SETBIT key offset value</td>
<td align="left">对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。</td>
</tr>

<tr>
<td align="left">SETEX key seconds value</td>
<td align="left">将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。</td>
</tr>

<tr>
<td align="left">SETNX key value</td>
<td align="left">只有在 key 不存在时设置 key 的值。</td>
</tr>

<tr>
<td align="left">SETRANGE key offset value</td>
<td align="left">用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。</td>
</tr>

<tr>
<td align="left">STRLEN key</td>
<td align="left">返回 key 所储存的字符串值的长度。</td>
</tr>

<tr>
<td align="left">MSET key value [key value &hellip;]</td>
<td align="left">同时设置一个或多个 key-value 对。</td>
</tr>

<tr>
<td align="left">MSETNX key value [key value &hellip;]</td>
<td align="left">同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</td>
</tr>

<tr>
<td align="left">PSETEX key milliseconds value</td>
<td align="left">这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，而不是像 SETEX 命令那样，以秒为单位。</td>
</tr>

<tr>
<td align="left">INCR key</td>
<td align="left">将 key 中储存的数字值增一。</td>
</tr>

<tr>
<td align="left">INCRBY key increment</td>
<td align="left">将 key 所储存的值加上给定的增量值（increment） 。</td>
</tr>

<tr>
<td align="left">INCRBYFLOAT key increment</td>
<td align="left">将 key 所储存的值加上给定的浮点增量值（increment） 。</td>
</tr>

<tr>
<td align="left">DECR key</td>
<td align="left">将 key 中储存的数字值减一。</td>
</tr>

<tr>
<td align="left">DECRBY key decrement</td>
<td align="left">key 所储存的值减去给定的减量值（decrement） 。</td>
</tr>

<tr>
<td align="left">APPEND key value</td>
<td align="left">如果 key 已经存在并且是一个字符串， APPEND 命令将指定的 value 追加到该 key 原来值（value）的末尾。</td>
</tr>
</tbody>
</table>

<h2 id="redis-哈希-hash">Redis 哈希(Hash)</h2>

<p>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash 特别适合用于存储对象。</p>

<p>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿）。</p>

<p><strong>实例</strong></p>

<pre><code>127.0.0.1:6379&gt;  HMSET runoobkey name &quot;redis tutorial&quot; description &quot;redis basic commands for caching&quot; likes 20 visitors 23000
OK
127.0.0.1:6379&gt;  HGETALL runoobkey
1) &quot;name&quot;
2) &quot;redis tutorial&quot;
3) &quot;description&quot;
4) &quot;redis basic commands for caching&quot;
5) &quot;likes&quot;
6) &quot;20&quot;
7) &quot;visitors&quot;
8) &quot;23000&quot;
</code></pre>

<p>在以上实例中，我们设置了 redis 的一些描述信息(name, description, likes, visitors) 到哈希表的 runoobkey 中。</p>

<h3 id="redis-hash-命令">Redis hash 命令</h3>

<p>下表列出了 redis hash 基本的相关命令：
| 命令 | 描述 |
| :&mdash;- | :&mdash;- |
| HDEL key field1 [field2] | 删除一个或多个哈希表字段 |
| HEXISTS key field | 查看哈希表 key 中，指定的字段是否存在。|
| HGET key field | 获取存储在哈希表中指定字段的值。 |
| HGETALL key | 获取在哈希表中指定 key 的所有字段和值 |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |
|  |  |</p>
	  </article>
    </section>

    <footer class="ui attached segment dream-tags">
      
        
          <a class="ui label" href="https://sltaurusblog.gitee.io/tags/redis" title="Redis">Redis</a>
        
      
      <div
        class="ui label"
        style="float: right; background: #1b1c1d !important; cursor: pointer;"
        onclick="savePostAsImg()">
        <i class="save icon"></i> Save as image
      </div>
    </footer>

    

    
      <footer class="ui bottom attached stacked segment post-disqus-area" data-html2canvas-ignore="true">
        <div id="disqus_thread"></div>
        <script>
          


          var disqus_config = function () {
            this.page.url = 'https:\/\/sltaurusblog.gitee.io\/2020\/06\/redis%E5%9F%BA%E7%A1%80\/';  
            this.page.identifier = '\/2020\/06\/redis%E5%9F%BA%E7%A1%80\/'; 
          };

          (function() { 
            var d = document, s = d.createElement('script');
            s.src = 'https://' + '...' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </footer>
    

  </div>
  <div class="sixteen wide mobile sixteen wide tablet four wide computer column">
    <article class="dream-header">
  <section class="ui top attached center aligned segment">
    <div class="ui small circular image">
      
        <img src="https://sltaurusblog.gitee.io/images/head.jpg">
      
    </div>

    <h1 class="ui medium header">SLTaurus的博客<div class="sub header" style="margin-top: 0.5rem;">合抱之木，生于毫末；九层之台，起于累土；千里之行，始于足下。</div>
    </h1>

    <div class="ui horizontal list">
      
      <a class="item" href="https://sltaurusblog.gitee.io/tags">
        <i class="tags icon" title="所有标签"></i>
      </a>
      <a class="item" href="https://sltaurusblog.gitee.io/categories">
        <i class="th list icon" title="所有分类"></i>
      </a>
    </div>
  </section>

  
  <section class="ui attached center aligned segment dream-tags">
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/ado.net" title="ado.net">ado.net</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/ef" title="ef">ef</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/hugo" title="hugo">hugo</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/javascript" title="javascript">javascript</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/markdown%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8" title="markdown快速入门">markdown快速入门</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/markdown%E8%AF%AD%E6%B3%95%E5%AE%8C%E6%95%B4%E7%89%88" title="markdown语法完整版">markdown语法完整版</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/mvc" title="mvc">mvc</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/mysql" title="mysql">mysql</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/orm%E5%AF%B9%E6%AF%94" title="orm对比">orm对比</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/orm%E6%95%B4%E7%90%86" title="orm整理">orm整理</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/powershell" title="powershell">powershell</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/redis" title="redis">redis</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/ref%E5%92%8Cout" title="ref和out">ref和out</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/sqlservice" title="sqlservice">sqlservice</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E5%86%85%E7%BD%AE%E6%B3%9B%E5%9E%8B%E5%A7%94%E6%89%98" title="内置泛型委托">内置泛型委托</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E5%8F%8D%E5%B0%84" title="反射">反射</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E7%B2%BE%E9%80%9Ac" title="精通c#">精通c#</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%88%9B%E5%BB%BA%E5%9E%8B" title="设计模式-创建型">设计模式-创建型</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%88%99" title="设计模式-原则">设计模式-原则</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%93%E6%9E%84%E5%9E%8B" title="设计模式-结构型">设计模式-结构型</a>
    
      <a class="ui label" href="https://sltaurusblog.gitee.io/tags/%E9%A1%B9%E7%9B%AE" title="项目">项目</a>
    
  </section>
  

  
  <section class="ui attached segment dream-categories">
    <div class="ui accordion">
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/c" class="item">c#</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/11/%E5%86%85%E7%BD%AE%E6%B3%9B%E5%9E%8B%E5%A7%94%E6%89%98actionfunc%E5%92%8Cpredicate/" class="item">内置泛型委托：Action、Func和Predicate</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/%E5%8F%8D%E5%B0%84%E6%95%B4%E7%90%86%E4%B9%8B%E6%97%A5%E5%B8%B8%E7%94%A8%E9%80%94/" class="item">反射整理之日常用途</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/ado.net/" class="item">ADO.NET</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/mvc%E6%95%B4%E7%90%86/" class="item">MVC整理</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/%E7%B2%BE%E9%80%9Acsharp%E7%AC%AC%E5%85%AD%E7%89%88/" class="item">精通CSharp(第六版)</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/08/ref%E5%92%8Cout%E4%BD%BF%E7%94%A8%E6%97%B6%E7%9A%84%E5%8C%BA%E5%88%AB/" class="item">ref和out使用时的区别</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/javascript" class="item">javascript</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/09/javascript%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%E7%AC%AC6%E7%89%88%E7%AC%94%E8%AE%B0%E4%B8%8B/" class="item">JavaScript入门经典第6版笔记(下)</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/08/javascript%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%E7%AC%AC6%E7%89%88%E7%AC%94%E8%AE%B0%E4%B8%8A/" class="item">JavaScript入门经典第6版笔记(上)</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/markdown" class="item">markdown</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/08/markdown%E8%AF%AD%E6%B3%95%E5%AE%8C%E6%95%B4%E7%89%88/" class="item">Markdown语法完整版</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/08/markdown%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/" class="item">Markdown快速入门</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/orm" class="item">orm</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/efchloesqlsugardos.orm%E5%9B%9B%E7%A7%8Dorm%E6%A1%86%E6%9E%B6%E7%9A%84%E5%AF%B9%E6%AF%94/" class="item">EF、Chloe、SqlSugar、DOS.ORM四种ORM框架的对比 </a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/entityframework/" class="item">EntityFramework</a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/orm%E6%95%B4%E7%90%86/" class="item">ORM整理</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/redis" class="item">redis</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/06/redis%E5%9F%BA%E7%A1%80/" class="item">Redis基础</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/%E5%8D%9A%E5%AE%A2" class="item">博客</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/08/windows10%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%90%AD%E5%BB%BAhugo%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2-git%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6-valine%E8%AF%84%E8%AE%BA/" class="item">windows10环境下搭建Hugo个人博客&#43;git分布式版本控制&#43;valine评论</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93" class="item">数据库</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/mysql%E6%8B%BE%E9%81%97/" class="item">MySql拾遗 </a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2019/10/sqlservice%E7%AC%94%E8%AE%B0/" class="item">SqlService笔记</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/%E8%87%AA%E5%8A%A8%E5%8C%96" class="item">自动化</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/windows-powershell%E6%8C%87%E5%8D%97/" class="item">Windows PowerShell指南</a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" class="item">设计模式</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/24%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8E%9F%E5%88%99/" class="item">24种设计模式之设计模式原则 </a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/24%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%A1%8C%E4%B8%BA%E5%9E%8B/" class="item">24种设计模式之行为型 </a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/24%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E7%BB%93%E6%9E%84%E5%9E%8B/" class="item">24种设计模式之结构型 </a>
              </div>
            </div>
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/04/24%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E5%88%9B%E5%BB%BA%E5%9E%8B/" class="item">24种设计模式之创建型 </a>
              </div>
            </div>
          
          </div>
        </div>
      
        <div class="title">
          <i class="dropdown icon"></i>
          <a href="https://sltaurusblog.gitee.io/categories/%E9%A1%B9%E7%9B%AE" class="item">项目</a>
        </div>
        <div class="content">
          <div class="ui list">
          
            <div class="item">
              <div class="content">
                <a href="https://sltaurusblog.gitee.io/2020/05/%E8%AE%A1%E4%BB%B6%E5%B7%A5%E8%B5%84%E9%A1%B9%E7%9B%AE/" class="item">计件工资项目</a>
              </div>
            </div>
          
          </div>
        </div>
      
    </div>
  </section>
  

  <section class="ui attached segment header-socials">
    <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="mailto:1641061313@qq.com">
        <i class=" mail icon" title="email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/SLTaurus" target="_blank">
        <i class=" twitter icon" title="twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com/SLTaurus" target="_blank">
        <i class=" facebook icon" title="facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/SLTaurus" target="_blank">
        <i class=" instagram icon" title="instagram"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://www.linkedin.com/in/SLTaurus" target="_blank">
        <i class=" linkedin icon" title="linkedin"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://github.com/SLTaurus" target="_blank">
        <i class=" github icon" title="github"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://www.stackoverflow.com/users/SLTaurus" target="_blank">
        <i class=" stack overflow icon" title="stackoverflow"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://codepen.io/SLTaurus" target="_blank">
        <i class=" codepen icon" title="codepen"></i>
      </a>
    </div>
  
</nav>

  </section>

  <section class="ui bottom attached center aligned segment">
    
      <p>© 2019 - 2020 SLTaurus的博客</p>
    

    <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</p>
  </section>
</article>

  </div>
</div>

        </section>
        <section class="back">
          
<nav class="ui secondary inverted menu dream-menu">

  <div class="item">
    <i class="large link bullseye icon dream-flip-toggle" title="翻转！"></i>
  </div>
  <div class="item">
    <i class="large link home icon" title="首页" onclick="window.location.href = 'https:\/\/sltaurusblog.gitee.io'"></i>
  </div>
  <div class="item">
    <i class="large link icon theme-switch" onclick="themeSwitch()"></i>
  </div>
</nav>

          <div class="ui centered relaxed grid dream-grid dream-back">
  

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    <article>
      <div class="ui top attached segment">
        <h3 class="ui header">社交链接</h3>
      </div>
      <div class="ui attached segment">
        <nav class="ui secondary menu dream-menu dream-socials">
  
    <div class="item">
      <a href="mailto:1641061313@qq.com">
        <i class="large mail icon" title="email"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://twitter.com/SLTaurus" target="_blank">
        <i class="large twitter icon" title="twitter"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://facebook.com/SLTaurus" target="_blank">
        <i class="large facebook icon" title="facebook"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://instagram.com/SLTaurus" target="_blank">
        <i class="large instagram icon" title="instagram"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://www.linkedin.com/in/SLTaurus" target="_blank">
        <i class="large linkedin icon" title="linkedin"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://github.com/SLTaurus" target="_blank">
        <i class="large github icon" title="github"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://www.stackoverflow.com/users/SLTaurus" target="_blank">
        <i class="large stack overflow icon" title="stackoverflow"></i>
      </a>
    </div>
  

  
    <div class="item">
      <a href="https://codepen.io/SLTaurus" target="_blank">
        <i class="large codepen icon" title="codepen"></i>
      </a>
    </div>
  
</nav>

      </div>
    </article>
  </section>

  <section class="sixteen wide mobile eight wide tablet four wide computer column dream-column">
    
  </section>

  
  
    <section class="sixteen wide mobile eight wide tablet eight wide computer column dream-column">
      <footer class="ui segment">
        <div id="disqus_thread"></div>
        <script>
          


          var disqus_config = function () {
            this.page.url = 'https:\/\/sltaurusblog.gitee.io\/2020\/06\/redis%E5%9F%BA%E7%A1%80\/about';  
            this.page.identifier = '/about'; 
          };

          (function() { 
            var d = document, s = d.createElement('script');
            s.src = 'https://' + '...' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </footer>
    </section>
  

</div>

        </section>
      </div>
    </div>

    <script src="https://sltaurusblog.gitee.io/js/jquery.min.js"></script>
<script src="https://sltaurusblog.gitee.io/js/semantic.min.js"></script>
<script src="https://sltaurusblog.gitee.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://sltaurusblog.gitee.io/js/masonry.pkgd.min.js"></script>
<script src="https://sltaurusblog.gitee.io/js/nav.js"></script>
<script src="https://sltaurusblog.gitee.io/js/header.js"></script>
<script src="https://sltaurusblog.gitee.io/js/main.js"></script>
<script src="https://sltaurusblog.gitee.io/js/theme.js"></script>
<script src="https://sltaurusblog.gitee.io/js/html2canvas.min.js"></script>

  
    <script src="https://sltaurusblog.gitee.io/js/prism.js"></script>
  


  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', '...', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




  </body>
</html>
